<!doctype html>
<html>

<head>
<title>WeeklyPlanner</title>

<link rel="stylesheet" href="../css/abc.css"> 

<script type="text/javascript" src="../js/jquery-1.11.3.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link href="../custom1.css" rel="stylesheet">
<!--<link rel="stylesheet" href="css/bootstrap-theme.min.css"> 


-->
</head>


<body class="container">
<div class="navbar navbar-inverse navbar-fixed-top">
<img src="../SAPImage.png" alt="Mountain View" align="right" style="width:80px;height:30px display:inline-block;
  vertical-align:top;  padding: 0px; float: right;
  margin: 2px;">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Weekly Planner</a>
	 
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="retail1.html">Retail1</a></li>
        <li ><a href="../retail2/retail2.html">Retail2</a></li>
        <li><a href="#E2E">E2E</a></li>
		<li><a href="#GRC">GRC</a></li>
		
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

<!--
<h1 align="center"> WeeklyPlanner</h1>

<p align="center"> Some Text
<br>Some Text
-->
</p>
<br>
<br>
<br>
<br>


<p id="message"></p>

<form method="post" class="form-inline">
<input class="but" type="button" name="date1" id="datepicker" placeholder = "" />
	
	<div>
		<input type="text" name="task" placeholder="Task" class="form-control">
		<select id='priority' name="priority">
			<option value="high">High</option>
			<option value="medium">Medium</option>
			<option value="low">Low</option>
		</select>
	
		<button type="button" class="btn btn-info" id="btn-add">Add Task</button>
		<!--<button type="button" class="btn btn-success" id="btn-update">Update</button> -->
	</div>
</form>
<hr>
<table class="table">

	<thead>
	
		<tr id="result1" >
		
		</tr>
		
		
	</thead>
	
	<tbody id="result">
		
	</tbody>
	
</table>

<script>
var team= 'retail1';
var d1=0;
// test alert
$( document ).ready(function() {
//load data from backend
      $.ajax({
		   url: "load.php",
		   dataType: "html",
		    type: "POST",
		   data: {team:team, week:d1 },
		   success: function(Result){
		        $('#result').html(Result);
		  
		   }
		
		})
		
		
	  $("#datepicker").datepicker({
    showWeek: true,
    firstDay: 1,
    onSelect: function(dateText) {
        
		  d1=$.datepicker.iso8601Week(new Date(dateText));
		 $.ajax({
    type: "POST",
    url: "load.php",
    data: {week:d1 ,team:team },
   success: function(Result){
		        $('#result').html(Result);
		  
		document.getElementById('datepicker').value = "CW :  "+""+d1;
	 
		   }
	
});
		
		
		
    }
});	
});

$(function(){
	// if we use id we need $('#some-name'); or class we use $('.some-name');
	$('#btn-add').click(function(event){
	event.preventDefault();
		// declare variable
		var _name = $('input[name="task"]').val();
	
		var _priority = $("#priority").val();
	    var _p;
		if( _priority == "high")
		  _p=3;
		else if( _priority == "medium")
		  _p=2;
		else 
		  _p=1;
		
		
		var _tr = '<tr><td>'+ _name +'</td></tr>';

		$('tbody').append(_tr);
		
		$.ajax({
		   url: "insert.php",
		   method: "POST",
		   data: {task:_name, priority:_p, week:d1, team:team},
		   dataType: "text",
		   success: function(strMessage){
		        $('#message').text(strMessage)
				//location.reload();
				$.ajax({
		   url: "load.php",
		   dataType: "html",
		    type: "POST",
		   data: {team:team, week:d1 },
		   success: function(Result){
		        $('#result').html(Result);
		  
		   }
		
		})
		   }
		
		})
	});
	
	
	
	
	
	$(document).on('click','.btn-delete', function(){
		if(confirm("Are you sure to delete?")){
		    var id1=this.id;
			//alert(d1);
			$(this).closest('tr').remove();
   					
			$.ajax({
		   url: "delete.php",
		   dataType: "html",
		    type: "POST",
		   data: {team:team, week:d1, id:id1 },
		   success: function(Result){
		        $.ajax({
		   url: "load.php",
		   dataType: "html",
		    type: "POST",
		   data: {team:team, week:d1 },
		   success: function(Result){
		        $('#result').html(Result);
		  
		   }
		
		})
		  
		   }
		
		})
			
			
			
		}
	});
	
	
});
</script>


</body>
</html> 